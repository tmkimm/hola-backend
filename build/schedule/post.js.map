{"version":3,"file":"post.js","sourceRoot":"/","sources":["schedule/post.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gEAAqC;AACrC,uDAA2E;AAC3E,uCAAmD;AACnD,uCAAmD;AACnD,2CAAgD;AAChD;;EAEE;AAEF,QAAQ;AACR,SAAe,eAAe;;;;;;yBAExB,CAAA,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY,CAAA,EAArC,wBAAqC;oBACjC,IAAI,GAAG,IAAI,uBAAQ,CAAC,cAAc,EAAE,CAAC;oBAC3C,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;oBACd,IAAI,CAAC,EAAE,GAAG,YAAY,CAAC;oBAEX,qBAAM,uBAAQ,CAAC,WAAW,CAAC,IAAI,EAAE;;;;;;4CACrC,mBAAmB,GAAG,IAAI,mBAAW,CAAC,WAAS,EAAE,WAAS,EAAE,2BAAiB,CAAC,CAAC;4CACrF,qBAAM,mBAAmB,CAAC,WAAW,EAAE,EAAA;;4CAAvC,SAAuC,CAAC;;;;;yBACzC,CAAC,EAAA;;oBAHI,GAAG,GAAG,SAGV;;;;;;CAEL;AAEQ,0CAAe","sourcesContent":["import schedule from 'node-schedule';\nimport { Notification as NotificationModel } from '../models/Notification';\nimport { Post as PostModel } from '../models/Post';\nimport { User as UserModel } from '../models/User';\nimport { PostService } from '../services/index';\n/*\n  글에 관련된 Schedule을 정의한다.\n*/\n\n// 자동 마감\nasync function postAutoClosing() {\n  // 프로덕션 환경에서만 실행\n  if (process.env.NODE_ENV === 'production') {\n    const rule = new schedule.RecurrenceRule();\n    rule.hour = 0;\n    rule.tz = 'Asia/Seoul';\n\n    const job = await schedule.scheduleJob(rule, async function () {\n      const PostServiceInstance = new PostService(PostModel, UserModel, NotificationModel);\n      await PostServiceInstance.autoClosing();\n    });\n  }\n}\n\nexport { postAutoClosing };\n"]}