{"version":3,"file":"dashboard.js","sourceRoot":"/","sources":["api/routes/dashboard.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response, Router } from 'express';\nimport { asyncErrorWrapper } from '../../asyncErrorWrapper';\nimport { DashboardService } from '../../services/index';\n\nconst route = Router();\n\nexport default (app: Router) => {\n  /**\n   * @swagger\n   * tags:\n        - name: dashboard\n        description: 어드민용 대시보드\n   */\n  app.use('/dashboard', route);\n\n  /**\n   * @swagger\n   * paths:\n   *   /dashboard/users/daily:\n   *    get:\n   *      tags:\n   *        - dashboard\n   *      summary: 사용자 데일리 액션\n   *      description: 총 회원 수, 오늘 가입자, 오늘 탈퇴자 조회\n   *      responses:\n   *        200:\n   *          description: successful operation\n   *          content:\n   *            application/json:\n   *              schema:\n   *                type: object\n   *                properties:\n   *                  totalUser:\n   *                    type: integer\n   *                    description: 총 회원 수\n   *                  signUp:\n   *                    type: integer\n   *                    description: 오늘 가입자 수\n   *                  signOut:\n   *                    type: integer\n   *                    description: 오늘 탈퇴자 조회 수\n   */\n  route.get(\n    '/users/daily',\n    asyncErrorWrapper(async (req: Request, res: Response, next: NextFunction) => {\n      const DashboardServiceInstance = new DashboardService();\n      const user = await DashboardServiceInstance.findDailyUser();\n      return res.status(200).json(user);\n    })\n  );\n\n  /**\n   * @swagger\n   * paths:\n   *   /dashboard/users/history:\n   *    get:\n   *      tags:\n   *        - dashboard\n   *      summary: 일자별 회원 가입 현황\n   *      description: 조회 기간에 해당되는 가입자 정보 집계\n   *      parameters:\n   *        - name: startDate\n   *          in: query\n   *          description: 조회 시작일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-01'\n   *        - name: endDate\n   *          in: query\n   *          description: 조회 종료일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-30'\n   *      responses:\n   *        200:\n   *          description: successful operation\n   *          content:\n   *            application/json:\n   *              schema:\n   *                type: array\n   *                items:\n   *                  type: object\n   *                  properties:\n   *                    _id:\n   *                      type: string\n   *                      description: 날짜\n   *                    signIn:\n   *                      type: integer\n   *                      description: 가입자 수\n   *                    signOut:\n   *                      type: integer\n   *                      description: 탈퇴자 수\n   *              example:\n   *              - _id: '2022-09-01'\n   *                signIn: 8\n   *                signOut: 3\n   */\n  route.get(\n    '/users/history',\n    asyncErrorWrapper(async (req: Request, res: Response, next: NextFunction) => {\n      const { startDate, endDate } = req.query;\n      const DashboardServiceInstance = new DashboardService();\n      const user = await DashboardServiceInstance.findUserHistory(startDate, endDate);\n      return res.status(200).json(user);\n    })\n  );\n\n  /**\n   * @swagger\n   * paths:\n   *   /dashboard/posts/daily:\n   *    get:\n   *      tags:\n   *        - dashboard\n   *      summary: 게시글 데일리 액션\n   *      description: 총오늘 전체 글 조회 수, 등록된 글, 글 마감 수, 글 삭제 수 조회\n   *      responses:\n   *        200:\n   *          description: successful operation\n   *          content:\n   *            application/json:\n   *              schema:\n   *                type: object\n   *                properties:\n   *                  totalView:\n   *                    type: integer\n   *                    description: 총 조회수\n   *                  created:\n   *                    type: integer\n   *                    description: 등록된 글\n   *                  closed:\n   *                    type: integer\n   *                    description: 마감된 글\n   *                  deleted:\n   *                    type: integer\n   *                    description: 삭제된 글\n   */\n  route.get(\n    '/posts/daily',\n    asyncErrorWrapper(async (req: Request, res: Response, next: NextFunction) => {\n      const DashboardServiceInstance = new DashboardService();\n      const post = await DashboardServiceInstance.findDailyPost();\n      return res.status(200).json(post);\n    })\n  );\n\n  /**\n   * @swagger\n   * paths:\n   *   /dashboard/posts/history:\n   *    get:\n   *      tags:\n   *        - dashboard\n   *      summary: 일자별 게시글 현황\n   *      description: 조회 기간에 해당되는 게시글 정보 집계(일자, 등록된 글, 마감된 글, 삭제된 글)\n   *      parameters:\n   *        - name: startDate\n   *          in: query\n   *          description: 조회 시작일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-01'\n   *        - name: endDate\n   *          in: query\n   *          description: 조회 종료일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-30'\n   *      responses:\n   *        200:\n   *          description: successful operation\n   *          content:\n   *            application/json:\n   *              schema:\n   *                type: array\n   *                items:\n   *                  type: object\n   *                  properties:\n   *                    _id:\n   *                      type: string\n   *                      description: 날짜\n   *                    created:\n   *                      type: integer\n   *                      description: 등록된 글\n   *                    closed:\n   *                      type: integer\n   *                      description: 마감된 글\n   *                    deleted:\n   *                      type: integer\n   *                      description: 삭제된 글\n   *              example:\n   *              - _id: '2022-09-01'\n   *                created: 8\n   *                closed: 3\n   *                deleted: 3\n   */\n  route.get(\n    '/posts/history',\n    asyncErrorWrapper(async (req: Request, res: Response, next: NextFunction) => {\n      const { startDate, endDate } = req.query;\n      const DashboardServiceInstance = new DashboardService();\n      const user = await DashboardServiceInstance.findPostHistory(startDate, endDate);\n      return res.status(200).json(user);\n    })\n  );\n\n  /**\n   * @swagger\n   * paths:\n   *   /dashboard/posts/filter-rank:\n   *    get:\n   *      tags:\n   *        - dashboard\n   *      summary: 가장 많이 조회해 본 언어 필터\n   *      description: 조회 기간에 해당되는 언어 필터링 순위\n   *      parameters:\n   *        - name: startDate\n   *          in: query\n   *          description: 조회 시작일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-01'\n   *        - name: endDate\n   *          in: query\n   *          description: 조회 종료일\n   *          required: true\n   *          schema:\n   *            type: string\n   *            example: '2022-09-30'\n   *      responses:\n   *        200:\n   *          description: successful operation\n   *          content:\n   *            application/json:\n   *              schema:\n   *                type: array\n   *                items:\n   *                  type: object\n   *                  properties:\n   *                    _id:\n   *                      type: string\n   *                      description: 언어\n   *                    count:\n   *                      type: integer\n   *                      description: 조회 수\n   *              example:\n   *              - _id: 'javascript'\n   *                count: 15\n   *              - _id: 'react'\n   *                count: 10\n   */\n  // 가장 많이 조회해 본 언어 필터\n  route.get(\n    '/posts/filter-rank',\n    asyncErrorWrapper(async (req: Request, res: Response, next: NextFunction) => {\n      const { startDate, endDate } = req.query;\n      const DashboardServiceInstance = new DashboardService();\n      const user = await DashboardServiceInstance.findPostFilterRank(startDate, endDate);\n      return res.status(200).json(user);\n    })\n  );\n};\n"]}