{"version":3,"file":"isEventValid.js","sourceRoot":"/","sources":["api/middlewares/isEventValid.ts"],"names":[],"mappings":"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","sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { body, validationResult } from 'express-validator';\nimport CustomError from '../../CustomError';\nimport { asyncErrorWrapper } from '../../asyncErrorWrapper';\nimport eventList from '../../eventList';\n\nconst checkEvent = [\n  body('title').isString().withMessage('\"title\" Invaild datatype(String)').optional({ nullable: true }),\n  body('content').isString().withMessage('\"content\" Invaild datatype(String)').optional({ nullable: true }),\n  body('onlineOrOffline')\n    .isString()\n    .withMessage('\"onlineOrOffline\" Invaild datatype(String)')\n    .optional({ nullable: true }),\n  body('place').isString().withMessage('\"place\" Invaild datatype(String)').optional({ nullable: true }),\n  body('organization').isString().withMessage('\"organization\" Invaild datatype(String)').optional({ nullable: true }),\n  body('link').isString().withMessage('\"link\" Invaild datatype(String)').optional({ nullable: true }),\n  body('imageUrl').isString().withMessage('\"imageUrl\" Invaild datatype(String)').optional({ nullable: true }),\n  body('startDate')\n    .custom((value, { req }) => {\n      return !isNaN(new Date(value).getTime());\n    })\n    .withMessage('\"startDate\" Invaild datatype(Date)')\n    .optional({ nullable: true }),\n  body('endDate')\n    .custom((value, { req }) => {\n      return !isNaN(new Date(value).getTime());\n    })\n    .withMessage('\"endDate\" Invaild datatype(Date)')\n    .optional({ nullable: true }),\n  body('eventType')\n    .custom((value, { req }) => {\n      return eventList.indexOf(value) > -1;\n    })\n    .withMessage('Invaild event list'),\n];\n\n// Event 유효성 검증 미들웨어\nconst isEventValid = asyncErrorWrapper(async function (req: Request, res: Response, next: NextFunction) {\n  const errors = await validationResult(req);\n  if (!errors.isEmpty()) {\n    throw new CustomError('ContentInvaildError', 400, errors.array()[0].msg);\n  }\n\n  next();\n});\n\nexport { checkEvent, isEventValid };\n"]}