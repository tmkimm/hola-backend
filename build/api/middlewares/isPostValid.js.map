{"version":3,"file":"isPostValid.js","sourceRoot":"/","sources":["api/middlewares/isPostValid.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uDAA2D;AAE3D,6DAA4D;AAC5D,kEAA4C;AAC5C,oEAA8C;AAE9C,IAAM,SAAS,GAAG;IAChB,IAAA,wBAAI,EAAC,OAAO,CAAC,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC7F,IAAA,wBAAI,EAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC/F,IAAA,wBAAI,EAAC,UAAU,CAAC,CAAC,OAAO,EAAE,CAAC,WAAW,CAAC,yBAAyB,CAAC,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC9F,IAAA,wBAAI,EAAC,UAAU,CAAC;SACb,MAAM,CAAC,UAAC,QAAQ;QACf,OAAO,QAAQ,CAAC,KAAK,CAAC,UAAC,IAAY;YACjC,OAAO,sBAAY,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;SACD,WAAW,CAAC,uBAAuB,CAAC;SACpC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;CAChC,CAAC;AAYO,8BAAS;AAVlB,mBAAmB;AACnB,IAAM,WAAW,GAAG,IAAA,qCAAiB,EAAC,UAAgB,GAAY,EAAE,GAAa,EAAE,IAAkB;;;;;wBACpF,qBAAM,IAAA,oCAAgB,EAAC,GAAG,CAAC,EAAA;;oBAApC,MAAM,GAAG,SAA2B;oBAC1C,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,EAAE;wBACrB,MAAM,IAAI,qBAAW,CAAC,qBAAqB,EAAE,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;qBAC1E;oBAED,IAAI,EAAE,CAAC;;;;;CACR,CAAC,CAAC;AAEiB,kCAAW","sourcesContent":["import { body, validationResult } from 'express-validator';\r\nimport { Request, Response, NextFunction } from 'express';\r\nimport { asyncErrorWrapper } from '../../asyncErrorWrapper';\r\nimport CustomError from '../../CustomError';\r\nimport languageList from '../../languageList';\r\n\r\nconst checkPost = [\r\n  body('title').isString().withMessage('Invaild datatype(String)').optional({ nullable: true }),\r\n  body('content').isString().withMessage('Invaild datatype(String)').optional({ nullable: true }),\r\n  body('language').isArray().withMessage('Invaild datatype(Array)').optional({ nullable: true }),\r\n  body('language')\r\n    .custom((language) => {\r\n      return language.every((item: string) => {\r\n        return languageList.indexOf(item) > -1;\r\n      });\r\n    })\r\n    .withMessage('Invaild language list')\r\n    .optional({ nullable: true }),\r\n];\r\n\r\n// Post 유효성 검증 미들웨어\r\nconst isPostValid = asyncErrorWrapper(async function (req: Request, res: Response, next: NextFunction) {\r\n  const errors = await validationResult(req);\r\n  if (!errors.isEmpty()) {\r\n    throw new CustomError('ContentInvaildError', 400, errors.array()[0].msg);\r\n  }\r\n\r\n  next();\r\n});\r\n\r\nexport { checkPost, isPostValid };\r\n"]}