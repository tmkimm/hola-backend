{"version":3,"file":"sentry.js","sourceRoot":"/","sources":["loaders/sentry.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAAuC;AACvC,uDAA2C;AAC3C,qDAAqD;AAGrD,0DAAqC;AAErC,mBAAe,UAAC,GAAwB;IACtC,MAAM,CAAC,IAAI,CAAC;QACV,GAAG,EAAE,eAAM,CAAC,SAAS;QACrB,gBAAgB,EAAE,GAAG;QACrB,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;QAC9C,YAAY,EAAE;YACZ,IAAI,4BAAa,CAAC;gBAChB,IAAI,EAAE,MAAM,CAAC,WAAW;aACzB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;YAC/C,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,GAAG,KAAA,EAAE,CAAC;SAC1C;KACF,CAAC,CAAC;IACH,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,EAA4B,CAAC,CAAC;IACpE,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC;AAC5C,CAAC,EAAC","sourcesContent":["import * as Sentry from '@sentry/node';\r\nimport * as Tracing from '@sentry/tracing';\r\nimport { RewriteFrames } from '@sentry/integrations';\r\n\r\nimport express from 'express';\r\nimport config from '../config/index';\r\n\r\nexport default (app: express.Application) => {\r\n  Sentry.init({\r\n    dsn: config.SentryDsn,\r\n    tracesSampleRate: 0.2,\r\n    enabled: process.env.NODE_ENV === 'production',\r\n    integrations: [\r\n      new RewriteFrames({\r\n        root: global.__rootdir__,\r\n      }),\r\n      new Sentry.Integrations.Http({ tracing: true }),\r\n      new Tracing.Integrations.Express({ app }),\r\n    ],\r\n  });\r\n  app.use(Sentry.Handlers.requestHandler() as express.RequestHandler);\r\n  app.use(Sentry.Handlers.tracingHandler());\r\n};\r\n"]}