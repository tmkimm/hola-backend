{"version":3,"file":"sentry.js","sourceRoot":"/","sources":["loaders/sentry.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,mDAAuC;AACvC,uDAA2C;AAC3C,qDAAqD;AAGrD,0DAAqC;AAErC,mBAAe,UAAC,GAAwB;IACtC,MAAM,CAAC,IAAI,CAAC;QACV,GAAG,EAAE,eAAM,CAAC,SAAS;QACrB,gBAAgB,EAAE,GAAG;QACrB,OAAO,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,YAAY;QAC9C,YAAY,EAAE;YACZ,IAAI,4BAAa,CAAC;gBAChB,IAAI,EAAE,MAAM,CAAC,WAAW;aACzB,CAAC;YACF,IAAI,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;YAC/C,IAAI,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,GAAG,KAAA,EAAE,CAAC;SAC1C;KACF,CAAC,CAAC;IACH,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,EAA4B,CAAC,CAAC;IACpE,GAAG,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC;AAC5C,CAAC,EAAC","sourcesContent":["import * as Sentry from '@sentry/node';\nimport * as Tracing from '@sentry/tracing';\nimport { RewriteFrames } from '@sentry/integrations';\n\nimport express from 'express';\nimport config from '../config/index';\n\nexport default (app: express.Application) => {\n  Sentry.init({\n    dsn: config.SentryDsn,\n    tracesSampleRate: 0.2,\n    enabled: process.env.NODE_ENV === 'production',\n    integrations: [\n      new RewriteFrames({\n        root: global.__rootdir__,\n      }),\n      new Sentry.Integrations.Http({ tracing: true }),\n      new Tracing.Integrations.Express({ app }),\n    ],\n  });\n  app.use(Sentry.Handlers.requestHandler() as express.RequestHandler);\n  app.use(Sentry.Handlers.tracingHandler());\n};\n"]}