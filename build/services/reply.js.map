{"version":3,"file":"reply.js","sourceRoot":"/","sources":["services/reply.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,uCAAyF;AAGzF,gBAAgB;AAChB,IAAM,aAAa,GAAG,UACpB,MAAsB,EACtB,MAAsB,EACtB,SAAyB,EACzB,OAAe,EACf,QAAgB;;;;oBAEU,qBAAM,WAAS,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,CAAC,EAAA;;gBAArF,KAAoB,SAAiE,EAAnF,IAAI,UAAA,EAAE,OAAO,aAAA;gBAGN,qBAAM,WAAS,CAAC,qBAAqB,CAAC,SAAS,CAAC,EAAA;;gBAAzD,MAAM,GAAG,SAAgD;gBAC/D,IAAI,MAAM,KAAK,IAAI;oBACjB,6GAA6G;oBAE7G,sBAAO,IAAI,EAAC;;;;KACf,CAAC;AAiBO,sCAAa;AAftB,aAAa;AACb,IAAM,WAAW,GAAG,UAAO,OAAuB,EAAE,WAA2B;;;;oBAC7E,qBAAM,WAAS,CAAC,uBAAuB,CAAC,OAAO,CAAC,GAAG,EAAE,WAAW,CAAC,EAAA;;gBAAjE,SAAiE,CAAC;gBAC5C,qBAAM,WAAS,CAAC,WAAW,CAAC,OAAO,CAAC,EAAA;;gBAApD,aAAa,GAAG,SAAoC;gBAC1D,sBAAO,aAAa,EAAC;;;KACtB,CAAC;AAUsB,kCAAW;AARnC,aAAa;AACb,IAAM,WAAW,GAAG,UAAO,OAAuB,EAAE,MAAsB;;;;oBACxE,qBAAM,WAAS,CAAC,uBAAuB,CAAC,OAAO,EAAE,MAAM,CAAC,EAAA;;gBAAxD,SAAwD,CAAC;gBAC1C,qBAAM,WAAS,CAAC,mBAAmB,CAAC,OAAO,CAAC,EAAA;;gBAArD,MAAM,GAAG,SAA4C;gBACxC,qBAAM,WAAS,CAAC,WAAW,CAAC,OAAO,CAAC,EAAA;;gBAAjD,UAAU,GAAG,SAAoC;;;;KAExD,CAAC;AAEmC,kCAAW","sourcesContent":["import { Types } from 'mongoose';\nimport { IReplyDocument, IPostModel, IComment, Post as PostModel } from '../models/Post';\nimport { Notification as NotificationModel } from '../models/Notification';\n\n// 신규 대댓글을 추가한다.\nconst registerReply = async (\n  userID: Types.ObjectId,\n  postId: Types.ObjectId,\n  commentId: Types.ObjectId,\n  content: string,\n  nickName: string,\n) => {\n  const { post, replyId } = await PostModel.registerReply(postId, commentId, content, userID);\n\n  // 대댓글 등록 시 댓글 등록자에게 달림 추가\n  const author = await PostModel.findAuthorByCommentId(commentId);\n  if (author !== null)\n    // await NotificationModel.registerNotification(postId, author, userID, 'reply', replyId, nickName); // 알림 등록\n\n    return post;\n};\n\n// 대댓글을 수정한다.\nconst modifyReply = async (comment: IReplyDocument, tokenUserId: Types.ObjectId) => {\n  await PostModel.checkReplyAuthorization(comment._id, tokenUserId);\n  const commentRecord = await PostModel.modifyReply(comment);\n  return commentRecord;\n};\n\n// 대댓글을 삭제한다.\nconst deleteReply = async (replyId: Types.ObjectId, userId: Types.ObjectId) => {\n  await PostModel.checkReplyAuthorization(replyId, userId);\n  const author = await PostModel.findAuthorByReplyId(replyId);\n  const postRecord = await PostModel.deleteReply(replyId);\n  // await NotificationModel.deleteNotification(replyId); // 알림 삭제\n};\n\nexport { registerReply, modifyReply, deleteReply };\n"]}